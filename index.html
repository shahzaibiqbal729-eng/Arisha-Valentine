<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Will You Be My Valentine, Arisha?</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<style>
html, body {
    margin:0;
    padding:0;
    overflow:hidden;
    height:100%;
    background: linear-gradient(to top, #ffc0cb, #ffe6f0);
    font-family: 'Great Vibes', cursive;
    color:white;
}
#buttons {
    position: absolute;
    bottom: 10%;
    width:100%;
    text-align:center;
    z-index:2;
}
.btn {
    background:#ff6fb5;
    border:none;
    padding:20px 40px;
    margin:20px;
    font-size:2em;
    border-radius:50px;
    cursor:pointer;
    box-shadow:0 0 20px #ff9fc3;
    transition: transform 0.2s, box-shadow 0.2s;
}
.btn:hover {
    transform: scale(1.1);
    box-shadow:0 0 30px #ffc0cb;
}
</style>
</head>
<body>

<div id="buttons">
    <button class="btn" id="yesBtn">Yes ðŸ’—</button>
    <button class="btn" id="noBtn">No ðŸ’”</button>
</div>

<canvas id="threeCanvas"></canvas>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<!-- GLTF Loader -->
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/js/loaders/GLTFLoader.js"></script>
<!-- Howler.js for music -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>

<script>
/* ------------- MUSIC ------------- */
var sound = new Howl({
    src:['https://actions.google.com/sounds/v1/ambiences/romantic_background.ogg'],
    autoplay:true,
    loop:true,
    volume:0.4
});
sound.play();

/* ------------- THREE.JS SCENE ------------- */
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight,0.1,1000);
camera.position.z = 15;

let renderer = new THREE.WebGLRenderer({canvas:document.getElementById("threeCanvas"), alpha:true, antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);

/* LIGHTS */
let ambient = new THREE.AmbientLight(0xffffff,0.7);
scene.add(ambient);
let pointLight = new THREE.PointLight(0xffc0cb,2,100);
pointLight.position.set(0,10,10);
scene.add(pointLight);

/* 3D TREE */
let treeGeometry = new THREE.ConeGeometry(3,10,32);
let treeMaterial = new THREE.MeshStandardMaterial({color:0xFF69B4});
let tree = new THREE.Mesh(treeGeometry, treeMaterial);
tree.position.y = -3;
scene.add(tree);

/* FLOATING 3D HEARTS */
let hearts = [];
let heartGeometry = new THREE.TetrahedronGeometry(0.3,0);
let heartMaterial = new THREE.MeshStandardMaterial({color:0xff4d6d});
for(let i=0;i<30;i++){
    let h = new THREE.Mesh(heartGeometry, heartMaterial);
    h.position.set((Math.random()-0.5)*20, Math.random()*10-2, (Math.random()-0.5)*20);
    hearts.push(h);
    scene.add(h);
}

/* FLOATING 3D BUTTERFLIES */
let butterflies = [];
let butterflyGeometry = new THREE.SphereGeometry(0.2,8,8);
let butterflyMaterial = new THREE.MeshStandardMaterial({color:0xffff66});
for(let i=0;i<20;i++){
    let b = new THREE.Mesh(butterflyGeometry,butterflyMaterial);
    b.position.set((Math.random()-0.5)*20, Math.random()*8, (Math.random()-0.5)*20);
    butterflies.push(b);
    scene.add(b);
}

/* PARTICLE MAGIC */
let particles = [];
for(let i=0;i<100;i++){
    let p = new THREE.Mesh(new THREE.SphereGeometry(0.05,6,6), new THREE.MeshBasicMaterial({color:0xffc0cb}));
    p.position.set((Math.random()-0.5)*20, Math.random()*10, (Math.random()-0.5)*20);
    particles.push(p);
    scene.add(p);
}

/* 3D FLOATING TEXT */
let loader = new THREE.FontLoader();
loader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function(font){
    let textGeometry = new THREE.TextGeometry('Will you be my Valentine, Arisha? ðŸ’–', {
        font: font,
        size: 1,
        height:0.2,
        curveSegments:12,
        bevelEnabled:true,
        bevelThickness:0.03,
        bevelSize:0.02,
        bevelOffset:0,
        bevelSegments:5
    });
    let textMaterial = new THREE.MeshStandardMaterial({color:0xffffff});
    let textMesh = new THREE.Mesh(textGeometry,textMaterial);
    textMesh.position.set(-7,5,0);
    scene.add(textMesh);

    // Animate text floating
    function animateText(){
        requestAnimationFrame(animateText);
        textMesh.position.y = 5 + Math.sin(Date.now()*0.002)*0.5;
        textMesh.rotation.y += 0.001;
    }
    animateText();
});

/* ANIMATION LOOP */
function animate(){
    requestAnimationFrame(animate);
    hearts.forEach(h=>{
        h.position.y += 0.02;
        h.position.x += Math.sin(Date.now()*0.001 + h.position.z)*0.01;
        if(h.position.y>10) h.position.y=-2;
    });
    butterflies.forEach(b=>{
        b.position.y += Math.sin(Date.now()*0.002 + b.position.x)*0.02;
        b.position.x += Math.cos(Date.now()*0.002 + b.position.y)*0.02;
        if(b.position.y>10) b.position.y=-2;
    });
    particles.forEach(p=>{
        p.position.y += 0.01;
        if(p.position.y>10) p.position.y=-2;
    });
    tree.rotation.y += 0.001;
    renderer.render(scene,camera);
}
animate();

/* ------------- YES / NO BUTTON ANIMATIONS ------------- */
document.getElementById('yesBtn').addEventListener('click', ()=>{
    // Full 3D hearts explosion
    for(let i=0;i<50;i++){
        let ph = new THREE.Mesh(new THREE.TetrahedronGeometry(0.2,0), new THREE.MeshStandardMaterial({color:0xff69b4}));
        ph.position.set(0,0,0);
        ph.vx = (Math.random()-0.5)*0.5;
        ph.vy = Math.random()*0.5+0.2;
        ph.vz = (Math.random()-0.5)*0.5;
        scene.add(ph);
        let explode = setInterval(()=>{
            ph.position.x += ph.vx;
            ph.position.y += ph.vy;
            ph.position.z += ph.vz;
        },30);
        setTimeout(()=>{scene.remove(ph); clearInterval(explode)},2000);
    }
    alert("I love you, Arisha! ðŸ’–");
});
document.getElementById('noBtn').addEventListener('click', ()=>{
    alert("It's okay, Arisha! ðŸ’–");
});
</script>
</body>
</html>